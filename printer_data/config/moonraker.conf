[server]
host: 0.0.0.0
port: 7125
klippy_uds_address: /home/radxa/printer_data/comms/klippy.sock

[authorization]
force_logins: false

trusted_clients:
    192.168.0.0/16
    10.0.0.0/8
    127.0.0.0/8
    169.254.0.0/16
    172.16.0.0/12
    192.168.0.0/16
    100.64.0.0/10
    FE80::/10
    ::1/128
cors_domains:
    *.lan
    *.local
    *://localhost
    *://localhost:*
    *://my.mainsail.xyz
    *://app.fluidd.xyz

[octoprint_compat]

[power ds24v]
type: gpio
pin: gpiochip0/gpio22

[power gjt24v]
type: gpio
pin: gpiochip3/gpio24 #120
initial_state: on

on_when_job_queued: True
locked_while_printing: False
restart_klipper_when_powered: True
bound_services: klipper

#[button glassdoor]
#type: gpio
#pin: gpiochip3/gpio7
#debounce_period: 0.05
#minimum_event_time: 0.2
#on_release:
#   {% do send_notification("door button pressed") %}
#   {% do call_method("machine.device_power.post_device", device="pw24v", action="toggle") %}

[history]

[update_manager]
channel: dev
refresh_interval: 168

[update_manager fluidd]
path: /home/radxa/fluidd
repo: fluidd-core/fluidd
channel: stable
type: web

# Crowsnest update_manager entry
[update_manager crowsnest]
type: git_repo
path: ~/crowsnest
origin: https://github.com/mainsail-crew/crowsnest.git
managed_services: crowsnest
install_script: tools/pkglist.sh

[update_manager fluidd-config]
type: git_repo
primary_branch: master
path: ~/fluidd-config
origin: https://github.com/fluidd-core/fluidd-config.git
managed_services: klipper

[update_manager timelapse]

type: git_repo

primary_branch: main

path: ~/moonraker-timelapse

origin: https://github.com/mainsail-crew/moonraker-timelapse.git

managed_services: klipper moonraker



[timelapse]

#output_path: ~/timelapse/ #文件输出路径

#frame_path: /tmp/timelapse/ #项目路径

#ffmpeg_binary_path: /usr/bin/ffmpeg #编译器路径

########################

########配制选项########

########################

#enabled: True #是否启用时间延时摄影

#mode: layermacro #此模式使用宏来触发抓取帧，但需要设置切片器才能在图层更改时添加GCODE

#snapshoturl: http://localhost:8080/?action=snapshot #摄像头调用地址

#gcode_verbose: True #“true”启用或“false”禁用宏的详细程度

#parkhead: False #“true”启用或“false”禁用在拍摄帧之前移动打印头。

#parkpos: back_left #这定义了在拍摄相框之前将打印头停放的位置。可能的配置是[center, front_left, front_right, back_left, back_right, custom]

#如果选择了custom想要自定义打印头驻留的位置可以设置下面的参数

#park_custom_pos_x: 0.0 #自定义打印头驻留的绝对 X 坐标（单位 mm）

#park_custom_pos_y: 0.0 #自定义打印头驻留的绝对 Y 坐标（单位 mm）

#park_custom_pos_dz: 0.0 #自定义打印头驻留的相对 Y 坐标（单位 mm）

#park_travel_speed: 100 #驻留时打印头移动速度（单位毫米/秒

#park_retract_speed: 15 #驻留时缩回速度（单位毫米/秒）

#park_extrude_speed: 15 #恢复打印时挤出的速度（单位毫米/秒）

#park_retract_distance: 1.0 #回抽来以防止渗出的距离（单位毫米）

#park_extrude_distance: 1.0 #恢复打印之前挤出以填充喷嘴的距离（单位 mm）

#hyperlapse_cycle: 30 #定义在超延时模式下拍摄帧的时间间隔

#autorender: True #“true”启用或“false”禁用打印结束时渲染过程的自动触发。或者，您可以使用最终 gcode 中的“TIMELAPSE_RENDER”或渲染 http 终端节点（可能集成到前端）来触发渲染过程。

#constant_rate_factor: 23 #这将配置渲染视频的质量与文件大小。CRF 刻度的范围是 0–51，其中 0 表示无损，23 表示默认值，51 表示质量最差。较低的值通常会导致较高的质量，主观上合理的范围为17-28。将 17 或 18 视为视觉上无损。更多信息： https://trac.ffmpeg.org/wiki/Encode/H.264F

#output_framerate: 30 #定义视频的帧速率。（每秒单位帧数）注意：如果启用了variable_fps，这将被忽略。

#pixelformat: yuv420p #定义输出视频的像素格式。一些较旧的h264设备，如手机和其他设备需要“ yuv420p”，这是默认的延时组件。要获取哪些像素格式可用的更多信息，请在系统控制台中运行“ffmpeg -pix_fmts”或参考 ffmpeg 文档：https://ffmpeg.org/ffmpeg.html

#time_format_code: %Y%m%d_%H%M #这定义了应如何命名呈现的视频。它使用 python 日期时间格式。默认值为“%Y%m%d_%H%M”。有关日期时间格式的更多信息，请参阅此处 https://docs.python.org/3/library/datetime.html#strftime-and-strptime-format-codes

#extraoutputparams:  定义FFMPEG的额外输出参数 更多信息： https://ffmpeg.org/ffmpeg.html 注意：在这里指定任何内容可能会禁用其他功能！（ffmpeg 限制）

#variable_fps: False #“true”启用或“false”禁用输出帧速率的变量计算。这使用拍摄的帧数和“目标长度”，但受“variable_fps_min”和“variable_fps_max”设置的限制。

#targetlength: 10 定义视频的目标长度（单位秒）

#variable_fps_min: 5 variable_fps的最小 fps（每秒帧数）。

#variable_fps_max: 60 variable_fps的最大 fps（每秒帧数）。

#flip_x: False

#flip_y: False

#duplicatelastframe: 0 #将最后一帧复制到输出视频的末尾。

#previewimage: True #“true”启用或“false”禁用最后一帧来生成预览缩略图

#saveframes: False “True”启用或“False”禁用将帧打包到 zip 文件以供外部使用或呈现。 



[update_manager led_effect]
type: git_repo
path: ~/klipper-led_effect
origin: https://github.com/julianschill/klipper-led_effect.git
is_system_service: False



[update_manager happy-hare]
type: git_repo
path: ~/Happy-Hare
origin: https://github.com/moggieuk/Happy-Hare.git
primary_branch: main
install_script: install.sh
managed_services: klipper

[mmu_server]
enable_file_preprocessor: True
enable_toolchange_next_pos: True
update_spoolman_location: True

[update_manager klipper-backup]
type: git_repo
path: ~/klipper-backup
origin: https://github.com/Staubgeborener/klipper-backup.git
managed_services: moonraker
primary_branch: main